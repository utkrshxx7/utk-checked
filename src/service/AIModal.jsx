import { GoogleGenerativeAI } from "@google/generative-ai";

  
  const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-1.5-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 64,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  

    export const chatSession = model.startChat({
      generationConfig,

      history: [
        {
          role: "user",
          parts: [
            {text: "Here's a Python function that sorts a list of numbers in ascending order. Identify the time complexity of this function. Then optimize this function and explain why it is faster. Don't use Python's in-built sort() method.\n\n```python\ndef sort_list(list_to_sort):\n  \"\"\"\n  This function sorts a list of numbers in ascending order using the bubble sort algorithm.\n\n  Args:\n    list_to_sort: A list of numbers to be sorted.\n\n  Returns:\n    A new list with the numbers sorted in ascending order.\n  \"\"\"\n  # Create a copy of the list to avoid modifying the original\n  sorted_list = list_to_sort.copy()\n  n = len(sorted_list)\n\n  # Iterate through the list n-1 times\n  for i in range(n-1):\n    # Flag to track if any swaps were made in a pass\n    swapped = False\n    # Iterate through the unsorted portion of the list\n    for j in range(n-i-1):\n      # Compare adjacent elements and swap if necessary\n      if sorted_list[j] > sorted_list[j+1]:\n        sorted_list[j], sorted_list[j+1] = sorted_list[j+1], sorted_list[j]\n        swapped = True\n    # If no swaps were made, the list is already sorted\n    if not swapped:\n      break\n\n    # Return the sorted list\n    return sorted_list\n\n# Example usage\nmy_list = [1, 9, 5, 2, 1, 8, 6, 6, 3, 4, 10, 7]\nsorted_list = sort_list(my_list)\nprint(sorted_list)  # Output: [1, 1, 2, 3, 4, 5, 6, 6, 7, 8, 9, 10]\n```"},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "```python\ndef sort_list(list_to_sort):\n  \"\"\"\n  This function sorts a list of numbers in ascending order using the bubble sort algorithm.\n\n  Args:\n    list_to_sort: A list of numbers to be sorted.\n\n  Returns:\n    A new list with the numbers sorted in ascending order.\n  \"\"\"\n  # Create a copy of the list to avoid modifying the original\n  sorted_list = list_to_sort.copy()\n  n = len(sorted_list)\n\n  # Iterate through the list n-1 times\n  for i in range(n-1):\n    # Flag to track if any swaps were made in a pass\n    swapped = False\n    # Iterate through the unsorted portion of the list\n    for j in range(n-i-1):\n      # Compare adjacent elements and swap if necessary\n      if sorted_list[j] > sorted_list[j+1]:\n        sorted_list[j], sorted_list[j+1] = sorted_list[j+1], sorted_list[j]\n        swapped = True\n    # If no swaps were made, the list is already sorted\n    if not swapped:\n      break\n\n    # Return the sorted list\n    return sorted_list\n\n# Example usage\nmy_list = [1, 9, 5, 2, 1, 8, 6, 6, 3, 4, 10, 7]\nsorted_list = sort_list(my_list)\nprint(sorted_list)  # Output: [1, 1, 2, 3, 4, 5, 6, 6, 7, 8, 9, 10]\n```\n\n**Time Complexity:**\n\nThe provided `sort_list` function uses the **Bubble Sort** algorithm. Bubble Sort has a time complexity of **O(n^2)** in the worst and average cases, where 'n' is the number of elements in the list. This is because in the worst case, it needs to iterate through the entire list multiple times to find the correct position of each element.\n\n**Optimization:**\n\nHere's an optimized version using **Insertion Sort**:\n\n```python\ndef insertion_sort(list_to_sort):\n  \"\"\"\n  This function sorts a list of numbers in ascending order using the insertion sort algorithm.\n\n  Args:\n    list_to_sort: A list of numbers to be sorted.\n\n  Returns:\n    A new list with the numbers sorted in ascending order.\n  \"\"\"\n  # Create a copy of the list to avoid modifying the original\n  sorted_list = list_to_sort.copy()\n  n = len(sorted_list)\n\n  # Iterate through the list starting from the second element\n  for i in range(1, n):\n    key = sorted_list[i]  # Store the current element\n    j = i - 1  # Index of the element to the left\n\n    # Move elements greater than the key one position to the right\n    while j >= 0 and key < sorted_list[j]:\n      sorted_list[j+1] = sorted_list[j]\n      j -= 1\n\n    # Insert the key at its correct position\n    sorted_list[j+1] = key\n\n  return sorted_list\n\n# Example usage\nmy_list = [1, 9, 5, 2, 1, 8, 6, 6, 3, 4, 10, 7]\nsorted_list = insertion_sort(my_list)\nprint(sorted_list)  # Output: [1, 1, 2, 3, 4, 5, 6, 6, 7, 8, 9, 10]\n```\n\n**Explanation of Optimization:**\n\n* **Insertion Sort Algorithm:** The optimized function uses the **Insertion Sort** algorithm. This algorithm is generally more efficient than Bubble Sort for smaller lists or lists that are already partially sorted. \n* **Time Complexity:** Insertion Sort has a time complexity of **O(n^2)** in the worst case, but in the best case (when the list is already sorted), it has a time complexity of **O(n)**. On average, it performs better than Bubble Sort.\n\n**Why Insertion Sort is Faster:**\n\n* **Adaptive Nature:** Insertion Sort is adaptive. It can take advantage of any existing order in the input list. If the list is already sorted, it completes in linear time (O(n)). \n* **Fewer Swaps:** In most cases, Insertion Sort performs fewer swaps than Bubble Sort, resulting in a potentially faster execution time. \n\n**In summary, while both algorithms have the same worst-case time complexity (O(n^2)), Insertion Sort is generally a more efficient sorting algorithm than Bubble Sort, especially for smaller or partially sorted lists.**\n"},
          ],
        },
        {
          role: "user",
          parts: [
            {text: "Generate Travel Plan for Location: Las Vegas, for 3 Days for Couple with a Cheap budget, Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, rating, Time travel each of the location for 3 days with each day plan with best time to visit in JSON format.\n"},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "```json\n{\n  \"hotel_options\": [\n    {\n      \"hotelName\": \"The D Las Vegas\",\n      \"hotelAddress\": \"301 Fremont Street, Las Vegas, NV 89101\",\n      \"price\": \"$60-$100 per night\",\n      \"hotelImageURL\": \"https://www.thed.com/media/images/hotel-exterior.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1699,\n        \"longitude\": -115.1423\n      },\n      \"rating\": 4.0,\n      \"description\": \"A downtown Las Vegas hotel with a retro vibe, featuring a casino, multiple dining options, and a rooftop pool.\"\n    },\n    {\n      \"hotelName\": \"Plaza Hotel & Casino\",\n      \"hotelAddress\": \"1 Main Street, Las Vegas, NV 89101\",\n      \"price\": \"$70-$120 per night\",\n      \"hotelImageURL\": \"https://www.plazahotelcasino.com/assets/images/hero-banner/hero-banner.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1693,\n        \"longitude\": -115.1437\n      },\n      \"rating\": 3.5,\n      \"description\": \"A historic hotel in downtown Las Vegas with a casino, multiple dining options, and a rooftop pool. Offers rooms with views of the Fremont Street Experience.\"\n    },\n    {\n      \"hotelName\": \"Golden Nugget Las Vegas\",\n      \"hotelAddress\": \"129 E Fremont St, Las Vegas, NV 89101\",\n      \"price\": \"$80-$150 per night\",\n      \"hotelImageURL\": \"https://www.goldennugget.com/las-vegas/media/images/hotel/exterior-overview.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1685,\n        \"longitude\": -115.1425\n      },\n      \"rating\": 4.5,\n      \"description\": \"A well-known Las Vegas hotel with a casino, multiple dining options, a shark tank, and a pool complex.\"\n    },\n    {\n      \"hotelName\": \"Circus Circus Hotel & Casino\",\n      \"hotelAddress\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": \"$50-$80 per night\",\n      \"hotelImageURL\": \"https://www.circuscircus.com/media/images/hotel/exterior/circus-circus-hotel-casino.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1072,\n        \"longitude\": -115.1723\n      },\n      \"rating\": 3.0,\n      \"description\": \"A budget-friendly hotel with a circus theme, featuring a casino, midway games, and a large indoor amusement park.\"\n    }\n  ],\n  \"itinerary\": {\n    \"day1\": {\n      \"plan\": [\n        {\n          \"placeName\": \"Fremont Street Experience\",\n          \"placeDetails\": \"A pedestrian-only street in downtown Las Vegas with a giant video screen canopy, live music, and street performers.\",\n          \"placeImageURL\": \"https://www.fremontstreetexperience.com/media/images/fremont-street-experience-night.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1699,\n            \"longitude\": -115.1423\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.5,\n          \"time\": \"Evening (7:00 PM - 11:00 PM)\"\n        }\n      ],\n      \"bestTime\": \"Evening\"\n    },\n    \"day2\": {\n      \"plan\": [\n        {\n          \"placeName\": \"The Strip\",\n          \"placeDetails\": \"The famous Las Vegas Boulevard, home to iconic hotels, casinos, and attractions.\",\n          \"placeImageURL\": \"https://www.visitlasvegas.com/sites/default/files/styles/hero_image/public/images/hero_images/las-vegas-strip-night.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1146,\n            \"longitude\": -115.1729\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 5.0,\n          \"time\": \"Daytime (10:00 AM - 5:00 PM)\"\n        },\n        {\n          \"placeName\": \"Bellagio Conservatory & Botanical Garden\",\n          \"placeDetails\": \"A stunning display of flowers, plants, and sculptures changing seasonally.\",\n          \"placeImageURL\": \"https://www.bellagio.com/content/dam/mgmresorts/bellagio/images/hero-images/conservatory-botanical-garden-hero.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1148,\n            \"longitude\": -115.1736\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.0,\n          \"time\": \"Afternoon (1:00 PM - 4:00 PM)\"\n        }\n      ],\n      \"bestTime\": \"Daytime\"\n    },\n    \"day3\": {\n      \"plan\": [\n        {\n          \"placeName\": \"Red Rock Canyon National Conservation Area\",\n          \"placeDetails\": \"A scenic desert landscape with hiking trails, rock formations, and stunning views.\",\n          \"placeImageURL\": \"https://www.nps.gov/redr/planyourvisit/images/redrock-canyon-sunset.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1525,\n            \"longitude\": -115.3089\n          },\n          \"ticketPricing\": \"$15 per vehicle\",\n          \"rating\": 4.5,\n          \"time\": \"Morning (9:00 AM - 12:00 PM)\"\n        },\n        {\n          \"placeName\": \"Hoover Dam\",\n          \"placeDetails\": \"A historic dam on the Colorado River, offering tours and breathtaking views.\",\n          \"placeImageURL\": \"https://www.nps.gov/hove/planyourvisit/images/hoover-dam-panorama.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.0154,\n            \"longitude\": -114.7941\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.0,\n          \"time\": \"Afternoon (2:00 PM - 5:00 PM)\"\n        }\n      ],\n      \"bestTime\": \"Daytime\"\n    }\n  }\n}\n```\n\n**Explanation:**\n\n* **hotel_options:** This section lists four budget-friendly hotels in Las Vegas with their names, addresses, prices, image URLs, geo-coordinates, ratings, and descriptions.\n* **itinerary:** This section outlines a 3-day itinerary for a couple, including:\n    * **day1:** An evening stroll through the vibrant Fremont Street Experience with its street performers and dazzling light shows.\n    * **day2:** A daytime exploration of the Las Vegas Strip, including a visit to the beautiful Bellagio Conservatory & Botanical Garden.\n    * **day3:** A day trip to Red Rock Canyon National Conservation Area for scenic hikes and then a stop at Hoover Dam for its historical significance and impressive engineering feat.\n\n**Important Considerations:**\n\n* **Transportation:** Consider using public transportation (the Las Vegas Monorail or bus system) to get around, especially on the Strip. Ride-sharing services like Uber and Lyft are also widely available.\n* **Food:** Vegas has a wide variety of restaurants, but you can save money by eating at the buffets offered by many hotels or opting for cheaper food options like fast food.\n* **Free Activities:** Take advantage of free attractions like the Bellagio Conservatory, fountain shows on the Strip, and the Fremont Street Experience.\n* **Discounts and Deals:** Check for deals and discounts on attractions, shows, and dining through websites like Groupon or LivingSocial.\n* **Weather:** Las Vegas is generally sunny and hot, so pack light, breathable clothing and sunscreen.\n\nThis itinerary is a starting point, and you can customize it to suit your interests and budget. Enjoy your trip to Las Vegas!\n"},
          ],
        },
      ],
    });
  
  